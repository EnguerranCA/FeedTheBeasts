<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Feed The Beasts</title>
    
    <!-- Favicon -->
    <link rel="icon" href="./src/assets/favicon.ico" type="image/x-icon" />
    
    <!-- Styles -->
    <link rel="stylesheet" href="./src/index.css" />
    
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    
    <!-- A-Frame Extras (animations, controls) -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    
    <!-- Physics System -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
    
    <!-- Mouse Cursor for Desktop -->
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
    
    <!-- GSAP for animations -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet" />
  </head>
  
  <body style="margin: 0; overflow: hidden">
    
    <!-- Loading Screen -->
    <div id="loading-screen" class="flex h-screen w-screen flex-col items-center justify-center bg-slate-900">
      <h1 class="mb-10 text-center font-lucky text-6xl text-white">
        Feed The Beasts
      </h1>
      <div id="loading-text" class="mb-6 text-center text-xl text-white">
        Chargement...
      </div>
      <div id="progress-bar-container">
        <div id="progress-bar"></div>
      </div>
      <p class="mt-10 text-gray-400">Un jeu par l'équipe Feed The Beasts</p>
    </div>
    
    <style>
      #progress-bar-container {
        width: 300px;
        height: 20px;
        background-color: #333;
        border-radius: 10px;
        overflow: hidden;
      }
      #progress-bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #9E35C1, #35B1B5);
        transition: width 0.1s ease;
      }
      a-scene {
        display: none;
      }
    </style>
    
    <!-- A-Frame Scene -->
    <a-scene
      id="game-scene"
      physics="gravity: -9.8; debug: false"
      loading-screen="enabled: false"
      raycaster="objects: .interactable"
      cursor="rayOrigin: mouse"
    >
      <!-- Assets -->
      <a-assets id="game-assets">
        <!-- Models will be loaded here dynamically or statically -->
        <!-- Example: <a-asset-item id="monsterModel" src="./src/assets/models/monster.glb"></a-asset-item> -->
      </a-assets>
      
      <!-- Camera Rig (VR + Desktop compatible) -->
      <a-entity id="rig" position="0 0 -4">
        <!-- Camera / Head -->
        <a-entity 
          id="head" 
          camera 
          look-controls="pointerLockEnabled: false"
          position="0 1.6 0"
        ></a-entity>
        
        <!-- VR Controllers -->
        <a-entity
          id="right-controller"
          laser-controls="hand: right"
          raycaster="objects: .interactable; showLine: true; far: 10"
          oculus-touch-controls="hand: right"
          vive-controls="hand: right"
          windows-motion-controls="hand: right"
        ></a-entity>
        
        <a-entity
          id="left-controller"
          laser-controls="hand: left"
          raycaster="objects: .interactable; showLine: true; far: 10"
          oculus-touch-controls="hand: left"
          vive-controls="hand: left"
          windows-motion-controls="hand: left"
        ></a-entity>
      </a-entity>
      
      <!-- Lighting -->
      <a-light type="ambient" color="#ffffff" intensity="0.4"></a-light>
      <a-light type="directional" color="#ffffff" intensity="0.6" position="5 10 5"></a-light>
      
      <!-- Game World Container -->
      <a-entity id="game-world">
        
        <!-- Room / Environment placeholder -->
        <a-entity id="room">
          <!-- Floor -->
          <a-plane 
            position="0 0 0" 
            rotation="-90 0 0" 
            width="20" 
            height="20" 
            color="#2a2a2a"
            class="interactable"
          ></a-plane>
          
          <!-- Walls placeholder -->
          <a-box position="0 2.5 -10" width="20" height="5" depth="0.2" color="#444"></a-box>
          <a-box position="-10 2.5 0" width="0.2" height="5" depth="20" color="#444"></a-box>
          <a-box position="10 2.5 0" width="0.2" height="5" depth="20" color="#444"></a-box>
        </a-entity>
        
        <!-- Objects Container (débarras) -->
        <a-entity id="objects-container" position="0 0 -5">
          <!-- Objects will be spawned here dynamically -->
        </a-entity>
        
        <!-- Counter (comptoir) -->
        <a-entity id="counter" position="0 0 -8">
          <a-box position="0 0.5 0" width="4" height="1" depth="1" color="#8B4513"></a-box>
          <!-- Collected objects will appear here -->
          <a-entity id="counter-items" position="0 1.1 0"></a-entity>
        </a-entity>
        
        <!-- Monster Window -->
        <a-entity id="monster-window" position="0 2 -9.5">
          <!-- Monster will appear here -->
          <a-entity id="current-monster"></a-entity>
          
          <!-- Speech Bubble -->
          <a-entity id="speech-bubble" position="0 1.5 0">
            <a-plane width="3" height="1.5" color="#ffffff" opacity="0.9"></a-plane>
            <a-text 
              id="monster-request" 
              value="" 
              color="#000000" 
              align="center" 
              width="2.5"
              position="0 0 0.01"
            ></a-text>
          </a-entity>
        </a-entity>
        
        <!-- Bonus Items Container -->
        <a-entity id="bonus-container">
          <!-- Golden birds / bonus items will spawn here -->
        </a-entity>
        
      </a-entity>
      
      <!-- UI Overlays -->
      <a-entity id="ui-container" position="0 0 0">
        
        <!-- Timer Display -->
        <a-entity id="timer-display" position="-3 3 -5">
          <a-plane width="1.5" height="0.5" color="#1a1a1a" opacity="0.8"></a-plane>
          <a-text 
            id="timer-text" 
            value="2:00" 
            color="#FF662F" 
            align="center" 
            width="4"
            position="0 0 0.01"
          ></a-text>
        </a-entity>
        
        <!-- Score Display -->
        <a-entity id="score-display" position="3 3 -5">
          <a-plane width="2" height="0.5" color="#1a1a1a" opacity="0.8"></a-plane>
          <a-text 
            id="score-text" 
            value="$0" 
            color="#A3E447" 
            align="center" 
            width="4"
            position="0 0 0.01"
          ></a-text>
        </a-entity>
        
      </a-entity>
      
      <!-- Menu Container (initially visible) -->
      <a-entity id="menu-container" position="0 1.6 -6">
        <a-plane width="5" height="3" color="#1a1a1a" opacity="0.9"></a-plane>
        
        <a-text 
          value="FEED THE BEASTS" 
          color="#9E35C1" 
          align="center" 
          width="6"
          position="0 0.8 0.01"
        ></a-text>
        
        <a-text 
          value="Nourris les monstres avec les bons objets!" 
          color="#ffffff" 
          align="center" 
          width="4"
          position="0 0.3 0.01"
        ></a-text>
        
        <!-- Start Button -->
        <a-box 
          id="btn-start" 
          class="interactable"
          position="0 -0.5 0.1" 
          width="2" 
          height="0.5" 
          depth="0.1" 
          color="#A3E447"
        >
          <a-text value="COMMENCER" color="#1a1a1a" align="center" width="4" position="0 0 0.06"></a-text>
        </a-box>
        
        <!-- Difficulty Buttons -->
        <a-entity id="difficulty-buttons" position="0 -1 0.1">
          <a-box 
            id="btn-easy" 
            class="interactable"
            position="-1.5 0 0" 
            width="1" 
            height="0.4" 
            depth="0.1" 
            color="#35B1B5"
          >
            <a-text value="Facile" color="#fff" align="center" width="3" position="0 0 0.06"></a-text>
          </a-box>
          
          <a-box 
            id="btn-medium" 
            class="interactable"
            position="0 0 0" 
            width="1" 
            height="0.4" 
            depth="0.1" 
            color="#FF662F"
          >
            <a-text value="Normal" color="#fff" align="center" width="3" position="0 0 0.06"></a-text>
          </a-box>
          
          <a-box 
            id="btn-hard" 
            class="interactable"
            position="1.5 0 0" 
            width="1" 
            height="0.4" 
            depth="0.1" 
            color="#9E35C1"
          >
            <a-text value="Difficile" color="#fff" align="center" width="3" position="0 0 0.06"></a-text>
          </a-box>
        </a-entity>
      </a-entity>
      
    </a-scene>
    
    <!-- Main Script -->
    <script type="module" src="./src/game-main.js"></script>
  </body>
</html>
